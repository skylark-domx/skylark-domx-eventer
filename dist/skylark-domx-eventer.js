/**
 * skylark-domx-eventer - The skylark eventer library for dom api extension.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
!function(e,n){var t=n.define,require=n.require,r="function"==typeof t&&t.amd,o=!r&&"undefined"!=typeof exports;if(!r&&!t){var i={};t=n.define=function(e,n,t){"function"==typeof t?(i[e]={factory:t,deps:n.map(function(n){return function(e,n){if("."!==e[0])return e;var t=n.split("/"),r=e.split("/");t.pop();for(var o=0;o<r.length;o++)"."!=r[o]&&(".."==r[o]?t.pop():t.push(r[o]));return t.join("/")}(n,e)}),resolved:!1,exports:null},require(e)):i[e]={factory:null,resolved:!0,exports:t}},require=n.require=function(e){if(!i.hasOwnProperty(e))throw new Error("Module "+e+" has not been defined");var module=i[e];if(!module.resolved){var t=[];module.deps.forEach(function(e){t.push(require(e))}),module.exports=module.factory.apply(n,t)||null,module.resolved=!0}return module.exports}}if(!t)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(e,require){e("skylark-domx-eventer/eventer",["skylark-langx/skylark"],function(e){return e.attach("domx.eventer",function e(){return e})}),e("skylark-domx-eventer/compatible",["skylark-langx","./eventer"],function(e,n){var t={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};return n.compatible=function(n,r){!r&&n.isDefaultPrevented||(r||(r=n),e.each(t,function(t,o){var i=r[t];n[t]=function(){return this[o]=e.returnTrue,i&&i.apply(r,arguments)},n[o]=e.returnFalse}));return n}}),e("skylark-domx-eventer/proxy",["skylark-langx","./eventer","./compatible"],function(e,n,t){var r=/^([A-Z]|returnValue$|layer[XY]$)/;return n.proxy=function(n,o){var i,a={originalEvent:n};for(i in n)"keyIdentifier"===i||r.test(i)||void 0===n[i]||(a[i]=n[i]);o&&e.mixin(a,o);return t(a,n)}}),e("skylark-domx-eventer/event-bindings",["skylark-langx","skylark-domx-finder","skylark-domx-noder","./eventer","./proxy"],function(e,n,t,r,o){var i="onfocusin"in window,a={focus:"focusin",blur:"focusout"},s={mouseenter:"mouseover",mouseleave:"mouseout"},l=function(e){return s[e]||i&&a[e]||e},u=e.klass({init:function(e,n){this._target=e,this._event=n,this._bindings=[]},add:function(r,i){var a=this._bindings,u={fn:r,options:e.mixin({},i)};a.push(u);var d=this;if(!d._listener){d._listener=function(r){var i=this,a=o(r),l=r._args,u=d._bindings,c=a.namespace;l=e.isDefined(l)?[a].concat(l):[a],a.type=d._event,e.each(u,function(r,o){var u=i;if(a.isImmediatePropagationStopped&&a.isImmediatePropagationStopped())return!1;var v=o.fn,f=o.options||{},p=f.selector,k=f.one,y=f.data;if(!c||c==f.ns||-1!==f.ns.indexOf(c)){if(p){if(!(u=n.closest(a.target,p))||u===i)return;e.mixin(a,{currentTarget:u,liveFired:i})}var g=d._event;if(g in s){var h=a.relatedTarget;if(h&&(h===u||t.contains(u,h)))return}e.isDefined(y)&&(a.data=y),k&&d.remove(v,f),!1===(v.handleEvent?v.handleEvent.apply(v,l):f.ctx?v.apply(f.ctx,l):v.apply(u,l))&&(a.preventDefault(),a.stopPropagation())}})};var c=d._event;d._target.addEventListener?d._target.addEventListener(l(c),d._listener,!1):console.warn("invalid eventer object",d._target)}},remove:function(n,t){var r,o;(t=e.mixin({},t)).ns&&(o=t.ns,r=new RegExp("(?:^| )"+o.replace(" "," .* ?")+"(?: |$)")),this._bindings=this._bindings.filter(function(e){var o=(!n||n===e.fn)&&(!r||r.test(e.options.ns))&&(!t.selector||t.selector==e.options.selector);return!o}),0==this._bindings.length&&(this._target.removeEventListener&&this._target.removeEventListener(l(this._event),this._listener,!1),this._listener=null)}});return r.EventBindings=u}),e("skylark-domx-eventer/special-events",["skylark-langx","skylark-domx-browser","./eventer"],function(e,n,t){var r={};return n.support.transition&&(r.transitionEnd={bindType:n.support.transition.end,delegateType:n.support.transition.end}),t.specialEvents=r}),e("skylark-domx-eventer/parse",[],function(){return function(e){if(e){var n=(""+e).split(".");return{type:n[0],ns:n.slice(1).sort().join(" ")}}return{type:null,ns:null}}}),e("skylark-domx-eventer/events-handler",["skylark-langx","./eventer","./event-bindings","./special-events","./parse"],function(e,n,t,r,o){var i=e.klass({init:function(e){this._target=e,this._handler={}},register:function(n,i,a){var s=o(n),n=s.type,l=r[n],u=l&&(l.bindType||l.bindEventName),d=this._handler;void 0===d[n]&&(d[n]=new t(this._target,u||n)),d[n].add(i,e.mixin({ns:s.ns},a))},unregister:function(n,t,r){var i=this._handler,a=o(n);if(n=a.type){var s=i[n];s&&s.remove(t,e.mixin({ns:a.ns},r))}else for(n in i){var s=i[n];s.remove(t,e.mixin({ns:a.ns},r))}}});return n.EventsHandler=i}),e("skylark-domx-eventer/find-handler",["skylark-langx","./eventer","./events-handler"],function(e,n,t){var r={};return n.findHandler=function(n){var o=e.uid(n),i=r[o];i||(i=r[o]=new t(n));return i}}),e("skylark-domx-eventer/clear",["skylark-langx","./eventer","./find-handler"],function(e,n,t){return n.clear=function(e){return t(e).unregister(),this}}),e("skylark-domx-eventer/native-event-ctors",["skylark-langx","./eventer"],function(e,n){var t=[window.CustomEvent,window.CompositionEvent,window.DragEvent,window.Event,window.FocusEvent,window.KeyboardEvent,window.MessageEvent,window.MouseEvent,window.MouseScrollEvent,window.MouseWheelEvent,window.MutationEvent,window.ProgressEvent,window.TextEvent,window.TouchEvent,window.UIEvent,window.WheelEvent,window.ClipboardEvent];return n.NativeEventCtors=t}),e("skylark-domx-eventer/native-events",["skylark-langx","./eventer"],function(e,n){return n.NativeEvents={compositionstart:1,compositionend:1,compositionupdate:1,beforecopy:16,beforecut:16,beforepaste:16,copy:16,cut:16,paste:16,drag:2,dragend:2,dragenter:2,dragexit:2,dragleave:2,dragover:2,dragstart:2,drop:2,abort:3,change:3,error:3,selectionchange:3,submit:3,reset:3,fullscreenchange:3,fullscreenerror:3,focus:4,blur:4,focusin:4,focusout:4,keydown:5,keypress:5,keyup:5,message:6,click:7,contextmenu:7,dblclick:7,mousedown:7,mouseup:7,mousemove:7,mouseover:7,mouseout:7,mouseenter:7,mouseleave:7,progress:11,textInput:12,tap:13,touchstart:13,touchmove:13,touchend:13,load:14,resize:14,select:14,scroll:14,unload:14,wheel:15}}),e("skylark-domx-eventer/create",["skylark-langx","./eventer","./native-event-ctors","./native-events","./parse","./compatible"],function(e,n,t,r,o,i){var a=function(){return function(n,a){e.isString(n)?a=a||{}:n=(a=n||{}).type||"";var s=o(n);n=s.type,a=e.mixin({bubbles:!0,cancelable:!0},a),s.ns&&(a.namespace=s.ns);var l=function(e){var n=r[e];n||(n=0);return t[n]}(n),u=new l(n,a);return e.safeMixin(u,a),i(u)}}();return n.create=a}),e("skylark-domx-eventer/trigger",["skylark-langx","./eventer","./create"],function(e,n,t){return n.trigger=function(e,n,r){var o;o=n instanceof Event?n:t(n,r);o._args=r;var i=e.dispatchEvent||e.trigger;i?i.call(e,o):console.warn("The evented parameter is not a eventable object");return this}}),e("skylark-domx-eventer/focused",["skylark-langx","./eventer","./trigger"],function(e,n,t){var r=[],o=e.loop(function(){for(var e=0;e<r.length;e++)t(r[e],"focused");r=[]});return o.start(),n.focused=function(e){r.includes(e)||r.push(e)}}),e("skylark-domx-eventer/is-native-event",["skylark-langx","./eventer","./native-events"],function(e,n,t){return n.isNativeEvent=function(n){if(e.isString(n))return!!t[n];if(e.isArray(n)){for(var r=0;r<n.length;r++)if(t[n])return!1;return n.length>0}}}),e("skylark-domx-eventer/keys",["skylark-langx","./eventer"],function(e,n){return n.keys={backspace:8,comma:188,delete:46,down:40,end:35,enter:13,escape:27,home:36,left:37,page_down:34,page_up:33,period:190,right:39,space:32,tab:9,up:38}}),e("skylark-domx-eventer/is-handler",["skylark-langx","./eventer"],function(e,n){return function(n){return n&&(e.isFunction(n)||e.isFunction(n.handleEvent))}}),e("skylark-domx-eventer/off",["skylark-langx","./eventer","./find-handler","./is-handler"],function(e,n,t,r){return n.off=function n(o,i,a,s){if(e.isPlainObject(i))return e.each(i,function(e,t){n(o,e,a,t)}),this;e.isString(a)||r(s)||!1===s||(s=a,a=void 0);!1===s&&(s=e.returnFalse);"string"==typeof i&&(i=i.indexOf(",")>-1?i.split(","):i.split(/\s/));var l=t(o);i&&i.forEach(function(e){l.unregister(e,s,{selector:a})});return this}}),e("skylark-domx-eventer/on",["skylark-langx","./eventer","./find-handler","./is-handler"],function(e,n,t,r){return n.on=function n(o,i,a,s,l,u,d){if(e.isPlainObject(i))return e.each(i,function(e,t){n(o,e,a,s,t,d)}),this;e.isString(a)||r(l)||(d=u,u=l,l=s,s=a,a=void 0);r(s)&&(d=u,u=l,l=s,s=void 0);e.isBoolean(u)&&(d=u,u=void 0);!1===l&&(l=e.returnFalse);"string"==typeof i&&(i=i.indexOf(",")>-1?i.split(","):i.split(/\s/));var c=t(o);i.forEach(function(e){if("ready"==e)return ready(l);c.register(e,l,{data:s,selector:a,ctx:u,one:!!d})});return this}}),e("skylark-domx-eventer/one",["skylark-langx","./eventer","./on"],function(e,n,t){return n.one=function(...e){return t(...e,!0),this}}),e("skylark-domx-eventer/ready",["skylark-langx","./eventer"],function(e,n){var t=/complete|loaded|interactive/;return n.ready=function(n){t.test(document.readyState)&&document.body?e.defer(n):document.addEventListener("DOMContentLoaded",n,!1);return this}}),e("skylark-domx-eventer/resized",["skylark-langx","./eventer","./trigger"],function(e,n,t){var r=[],o=e.loop(function(){for(var e=0;e<r.length;e++)t(r[e],"resized");r=[]});return o.start(),n.resized=function(e){r.includes(e)||r.push(e)}}),e("skylark-domx-eventer/shortcuts",["skylark-langx","skylark-domx-data","./eventer","./keys"],function(e,n,t,r){return t.shortcuts=function(e){var t=n.data(e,"shortcuts");if(!t){t={},n.data(e,"shortcuts",t);var o=function(e,n){var t=n.metaKey||n.ctrlKey;if(e.ctrl==t&&e.alt==n.altKey&&e.shift==n.shiftKey&&(n.keyCode==e.keyCode||n.charCode&&n.charCode==e.charCode))return n.preventDefault(),"keydown"==n.type&&e.fn(n),!0};on(e,"keyup keypress keydown",function(e){if(!/INPUT|TEXTAREA/.test(e.target.nodeName))for(var n in t)o(t[n],e)})}return{add:function(e,n){(e.indexOf(",")>-1?e.toLowerCase().split(","):e.toLowerCase().split(" ")).forEach(function(e){var o={fn:n,alt:!1,ctrl:!1,shift:!1};e.split("+").forEach(function(e){switch(e){case"alt":case"ctrl":case"shift":o[e]=!0;break;default:o.charCode=e.charCodeAt(0),o.keyCode=r[e]||e.toUpperCase().charCodeAt(0)}});var i=(o.ctrl?"ctrl":"")+","+(o.alt?"alt":"")+","+(o.shift?"shift":"")+","+o.keyCode;t[i]=o})}}}}),e("skylark-domx-eventer/stop",["skylark-langx","./eventer"],function(e,n){return n.stop=function(e){window.document.all&&(e.keyCode=0);e.preventDefault&&(e.preventDefault(),e.stopPropagation());return this}}),e("skylark-domx-eventer/main",["skylark-langx","skylark-domx-velm","skylark-domx-query","./eventer","./clear","./compatible","./event-bindings","./events-handler","./find-handler","./focused","./is-native-event","./keys","./native-event-ctors","./native-events","./off","./on","./one","./proxy","./ready","./resized","./shortcuts","./special-events","./stop","./trigger"],function(e,n,t,r){e.each(r.NativeEvents,function(e){r[e]=function(n,t,o,i){return arguments.length>1?r.on(n,e,t,o,i):("focus"==e?n.focus&&n.focus():"blur"==e?n.blur&&n.blur():"click"==e?n.click&&n.click():r.trigger(n,e),this)}});var o=["off","on","one","trigger"];return e.each(r.NativeEvents,function(e){o.push(e)}),n.delegate(o,r),e.each(o,function(e,n){t.fn[n]=t.wraps.wrapper_every_act(r[n],r)}),t.ready=r.ready,r}),e("skylark-domx-eventer",["skylark-domx-eventer/main"],function(e){return e})}(t),!r){var a=require("skylark-langx-ns");o?module.exports=a:n.skylarkjs=a}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-domx-eventer.js.map
